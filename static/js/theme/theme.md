# Theme Documentation

## Overview
Данный проект использует два отдельных скрипта для управления темой сайта:
- **critical** — ранняя инициализация темы, выполняется до загрузки CSS.
- **themeLocalStorage.js** — основной контроллер выбора темы через меню.

---

## Files

### 1. critical
**Назначение:**  
- Выполняется синхронно в `<head>` до подключения стилей.  
- Устанавливает атрибут `data-theme` на `<html>` сразу при загрузке страницы.  
- Предотвращает мигание (FOUC) при переключении тем.

**Характеристики функции:**
- Читает сохранённое значение `theme` из `localStorage`.  
- Если значение отсутствует, выбирает системную тему (`prefers-color-scheme`) и сохраняет `"auto"`.  
- Устанавливает `data-theme` на `"light"`, `"dark"` или системное значение.

---

### 2. themeLocalStorage.js
**Назначение:**  
- Подключается внизу страницы.  
- Управляет выбором темы пользователем через меню `#THEME-DROPDOWN`.  
- Поддерживает режимы `light`, `dark`, `auto`.  
- Сохраняет выбор в `localStorage`.

**Характеристики функции:**
- `setTheme(theme)`  
  - При `light` или `dark`: устанавливает `data-theme` и сохраняет выбор.  
  - При `auto`: применяет системную тему и подписывается на её изменения.  
- Навешивает обработчики на ссылки внутри `#THEME-DROPDOWN`.  
- Подсвечивает активный пункт меню классом `active`.  
- Использует безопасный доступ к `localStorage` через `try/catch`.

---

## Usage

### HTML Menu
```html
<ul id="THEME-DROPDOWN" class="dropdown">
  <li><a data-theme="light" href="#">Light</a></li>
  <li><a data-theme="dark" href="#">Dark</a></li>
  <li><a data-theme="auto" href="#">Auto</a></li>
</ul>
